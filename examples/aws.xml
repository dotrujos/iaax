<?xml version="1.0" encoding="UTF-8"?>
<iaax:infrastructure xmlns:aws="gabrielaraujo.com/iaax/aws/schema.xsd"
                     xmlns:iaax="gabrielaraujo.com/iaax/schema.xsd">
    <iaax:provider>
        <iaax:source>hashicorp/aws</iaax:source>
        <iaax:version>~> 5.0</iaax:version>
    </iaax:provider>

    <iaax:environment>
        <iaax:variable key="PublicSubnetName">public_subnet</iaax:variable>
        <iaax:variable key="AwsInstanceType">t3.medium</iaax:variable>
        <iaax:variable key="AwsAmi">ami-04b70fa74e45c3917</iaax:variable>
    </iaax:environment>

    <aws:vpc cidr="10.0.0.0/16" region="us-east-1" name="vpc_prd" alias="us_east">
        <aws:subnets>
            <aws:subnet name="public_subnet" cidr="10.0.1.0/24" />

            <aws:subnet name="private_subnet" cidr="10.0.10.0/24">
                <aws:tag key="Name" value="Private-Subnet-1A" />
            </aws:subnet>
        </aws:subnets>

        <aws:ec2 name="web_server_01">
            <aws:instance-type>t3.medium</aws:instance-type>
            <aws:ami>ami-04b70fa74e45c3917</aws:ami>
            <aws:subnet-name>public_subnet</aws:subnet-name>
            <aws:tags>
                <aws:tag key="Name" value="MyWebServer_1" />
                <aws:tag key="Environment" value="Dev" />
            </aws:tags>
        </aws:ec2>

        <aws:ec2 name="web_server_02">
            <aws:instance-type>{{AwsInstanceType}}</aws:instance-type>
            <aws:ami>{{AwsAmi}}</aws:ami>
            <aws:subnet-name>{{PublicSubnetName}}</aws:subnet-name>
            <aws:tags>
                <aws:tag key="Name" value="MyWebServer_2" />
                <aws:tag key="Environment" value="Dev" />
            </aws:tags>
        </aws:ec2>

        <aws:ec2 name="db_server">
            <aws:instance-type>t3.large</aws:instance-type>
            <aws:ami>ami-04b70fa74e45c3917</aws:ami>
            <aws:subnet-name>private_subnet</aws:subnet-name>
            <aws:tags>
                <aws:tag key="Name" value="MyDatabase" />
                <aws:tag key="Environment" value="Dev" />
            </aws:tags>
        </aws:ec2>
    </aws:vpc>
</iaax:infrastructure>